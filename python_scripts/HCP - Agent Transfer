{
  "Version": "2019-10-30",
  "StartAction": "09435f82-30b7-448a-af81-00e237af3a5b",
  "Metadata": {
    "entryPointPosition": {
      "x": -436,
      "y": 156.8
    },
    "ActionMetadata": {
      "56ef07a4-858a-486f-930c-58cb4879239c": {
        "position": {
          "x": -22.4,
          "y": 136.8
        },
        "children": [
          "00981b70-41fe-4baa-abee-a28005faa6f3"
        ],
        "overrideConsoleVoice": false,
        "fragments": {
          "SetContactData": "00981b70-41fe-4baa-abee-a28005faa6f3"
        },
        "overrideLanguageAttribute": true
      },
      "00981b70-41fe-4baa-abee-a28005faa6f3": {
        "position": {
          "x": -22.4,
          "y": 136.8
        },
        "dynamicParams": []
      },
      "ce702ddb-c294-4dd1-8715-2a31f154c590": {
        "position": {
          "x": 504,
          "y": 341.6
        }
      },
      "610ed3fd-460f-491c-b250-a686105af077": {
        "position": {
          "x": 1534.4,
          "y": 25.6
        }
      },
      "ea49dc11-0478-4508-b018-5703eda402dd": {
        "position": {
          "x": 1301.6,
          "y": 44.8
        },
        "parameters": {
          "AgentId": {
            "useDynamic": true
          }
        },
        "useDynamic": true
      },
      "d5d82a97-0a9a-40f1-9dde-d26f56db7ff2": {
        "position": {
          "x": 1872,
          "y": 160.8
        }
      },
      "f5c21661-329c-4d34-afe6-143703a7a34f": {
        "position": {
          "x": 1616,
          "y": 296
        }
      },
      "a85c8914-8252-4467-80b4-2cea69f7a502": {
        "position": {
          "x": 1058.4,
          "y": 26.4
        },
        "parameters": {
          "Attributes": {
            "voiceCallId": {
              "useDynamic": true
            }
          }
        },
        "dynamicParams": [
          "voiceCallId"
        ]
      },
      "baf5f127-6489-42d4-99b1-2c617870701c": {
        "position": {
          "x": 1014.4,
          "y": 250.4
        }
      },
      "5e641eb0-0e27-4f78-9e3e-5d8cd35a4ac5": {
        "position": {
          "x": 493.6,
          "y": 118.4
        }
      },
      "9d8e8791-2c39-4027-97c9-8c36bc1acf31": {
        "position": {
          "x": 789.6,
          "y": 56
        },
        "parameters": {
          "LambdaFunctionARN": {
            "displayName": "JAP-PROD-serverlessrepo-s-InvokeTelephonyIntegrati-5Asv2AMrlNmG"
          }
        },
        "dynamicMetadata": {
          "methodName": false
        }
      },
      "1c6d49e7-5144-4fd8-aa42-315a80f41400": {
        "position": {
          "x": 216.8,
          "y": 109.6
        },
        "parameters": {
          "AgentId": {
            "useDynamic": true,
            "displayName": "Agent.ARN"
          }
        },
        "useDynamic": true
      },
      "09435f82-30b7-448a-af81-00e237af3a5b": {
        "position": {
          "x": -300.8,
          "y": 143.2
        }
      }
    },
    "Annotations": [],
    "name": "HCP - Agent Transfer",
    "description": "",
    "type": "agentTransfer",
    "status": "PUBLISHED",
    "hash": {}
  },
  "Actions": [
    {
      "Parameters": {
        "TextToSpeechVoice": "Mizuki"
      },
      "Identifier": "56ef07a4-858a-486f-930c-58cb4879239c",
      "Type": "UpdateContactTextToSpeechVoice",
      "Transitions": {
        "NextAction": "00981b70-41fe-4baa-abee-a28005faa6f3"
      }
    },
    {
      "Parameters": {
        "LanguageCode": "ja-JP"
      },
      "Identifier": "00981b70-41fe-4baa-abee-a28005faa6f3",
      "Type": "UpdateContactData",
      "Transitions": {
        "NextAction": "1c6d49e7-5144-4fd8-aa42-315a80f41400",
        "Errors": [
          {
            "NextAction": "1c6d49e7-5144-4fd8-aa42-315a80f41400",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "SSML": "<speak> エージェントは現在電話に出ることができません。後ほどお掛け直しください。 </speak>"
      },
      "Identifier": "ce702ddb-c294-4dd1-8715-2a31f154c590",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "d5d82a97-0a9a-40f1-9dde-d26f56db7ff2",
        "Errors": [
          {
            "NextAction": "d5d82a97-0a9a-40f1-9dde-d26f56db7ff2",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {},
      "Identifier": "610ed3fd-460f-491c-b250-a686105af077",
      "Type": "TransferContactToQueue",
      "Transitions": {
        "NextAction": "f5c21661-329c-4d34-afe6-143703a7a34f",
        "Errors": [
          {
            "NextAction": "f5c21661-329c-4d34-afe6-143703a7a34f",
            "ErrorType": "QueueAtCapacity"
          },
          {
            "NextAction": "f5c21661-329c-4d34-afe6-143703a7a34f",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "AgentId": "$.Agent.ARN"
      },
      "Identifier": "ea49dc11-0478-4508-b018-5703eda402dd",
      "Type": "UpdateContactTargetQueue",
      "Transitions": {
        "NextAction": "610ed3fd-460f-491c-b250-a686105af077",
        "Errors": [
          {
            "NextAction": "f5c21661-329c-4d34-afe6-143703a7a34f",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {},
      "Identifier": "d5d82a97-0a9a-40f1-9dde-d26f56db7ff2",
      "Type": "DisconnectParticipant",
      "Transitions": {}
    },
    {
      "Parameters": {
        "Text": "転送に失敗しました。"
      },
      "Identifier": "f5c21661-329c-4d34-afe6-143703a7a34f",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "d5d82a97-0a9a-40f1-9dde-d26f56db7ff2",
        "Errors": [
          {
            "NextAction": "d5d82a97-0a9a-40f1-9dde-d26f56db7ff2",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Attributes": {
          "voiceCallId": "$.External.voiceCallId"
        }
      },
      "Identifier": "a85c8914-8252-4467-80b4-2cea69f7a502",
      "Type": "UpdateContactAttributes",
      "Transitions": {
        "NextAction": "ea49dc11-0478-4508-b018-5703eda402dd",
        "Errors": [
          {
            "NextAction": "ea49dc11-0478-4508-b018-5703eda402dd",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "LoopCount": "3"
      },
      "Identifier": "baf5f127-6489-42d4-99b1-2c617870701c",
      "Type": "Loop",
      "Transitions": {
        "NextAction": "ea49dc11-0478-4508-b018-5703eda402dd",
        "Conditions": [
          {
            "NextAction": "9d8e8791-2c39-4027-97c9-8c36bc1acf31",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "ContinueLooping"
              ]
            }
          },
          {
            "NextAction": "ea49dc11-0478-4508-b018-5703eda402dd",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "DoneLooping"
              ]
            }
          }
        ]
      }
    },
    {
      "Parameters": {
        "Text": "転送中です。 "
      },
      "Identifier": "5e641eb0-0e27-4f78-9e3e-5d8cd35a4ac5",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "9d8e8791-2c39-4027-97c9-8c36bc1acf31",
        "Errors": [
          {
            "NextAction": "9d8e8791-2c39-4027-97c9-8c36bc1acf31",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "LambdaFunctionARN": "arn:aws:lambda:ap-northeast-1:406592950315:function:JAP-PROD-serverlessrepo-s-InvokeTelephonyIntegrati-5Asv2AMrlNmG",
        "InvocationTimeLimitSeconds": "8",
        "LambdaInvocationAttributes": {
          "methodName": "createTransferVC"
        }
      },
      "Identifier": "9d8e8791-2c39-4027-97c9-8c36bc1acf31",
      "Type": "InvokeLambdaFunction",
      "Transitions": {
        "NextAction": "a85c8914-8252-4467-80b4-2cea69f7a502",
        "Errors": [
          {
            "NextAction": "baf5f127-6489-42d4-99b1-2c617870701c",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "MetricType": "NumberOfAgentsAvailable",
        "AgentId": "$.Agent.ARN"
      },
      "Identifier": "1c6d49e7-5144-4fd8-aa42-315a80f41400",
      "Type": "CheckMetricData",
      "Transitions": {
        "NextAction": "ce702ddb-c294-4dd1-8715-2a31f154c590",
        "Conditions": [
          {
            "NextAction": "5e641eb0-0e27-4f78-9e3e-5d8cd35a4ac5",
            "Condition": {
              "Operator": "NumberGreaterThan",
              "Operands": [
                "0"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "ce702ddb-c294-4dd1-8715-2a31f154c590",
            "ErrorType": "NoMatchingCondition"
          },
          {
            "NextAction": "ce702ddb-c294-4dd1-8715-2a31f154c590",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "FlowLoggingBehavior": "Enabled"
      },
      "Identifier": "09435f82-30b7-448a-af81-00e237af3a5b",
      "Type": "UpdateFlowLoggingBehavior",
      "Transitions": {
        "NextAction": "56ef07a4-858a-486f-930c-58cb4879239c"
      }
    }
  ]
}